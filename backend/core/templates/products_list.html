{% extends 'base.html' %}

{% block title %}Produtos - Vólus TechTest{% endblock %}

{% block content %}
<h1 style="margin-bottom: 30px;">Lista de Produtos</h1>

<div style="background: white; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
    <form method="get" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
        <input type="text" name="q" placeholder="Buscar..." value="{{ filters.q }}" style="padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
        
        <select name="category" style="padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
            <option value="">Todas as categorias</option>
            {% for value, label in categories %}
            <option value="{{ value }}" {% if filters.category == value %}selected{% endif %}>{{ label }}</option>
            {% endfor %}
        </select>
        
        <input type="number" name="min_price" placeholder="Preço mín" value="{{ filters.min_price }}" step="0.01" style="padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
        
        <input type="number" name="max_price" placeholder="Preço máx" value="{{ filters.max_price }}" step="0.01" style="padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
        
        <button type="submit" style="padding: 10px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;">Filtrar</button>
    </form>
</div>

<div style="background: white; border-radius: 8px; overflow: hidden;">
    <table style="width: 100%; border-collapse: collapse;">
        <thead style="background: #f8f9fa;">
            <tr>
                <th style="padding: 12px; text-align: left; border-bottom: 2px solid #dee2e6;">Código</th>
                <th style="padding: 12px; text-align: left; border-bottom: 2px solid #dee2e6;">Nome</th>
                <th style="padding: 12px; text-align: left; border-bottom: 2px solid #dee2e6;">Categoria</th>
                <th style="padding: 12px; text-align: right; border-bottom: 2px solid #dee2e6;">Preço</th>
                <th style="padding: 12px; text-align: right; border-bottom: 2px solid #dee2e6;">Estoque</th>
                <th style="padding: 12px; text-align: center; border-bottom: 2px solid #dee2e6;">Ações</th>
            </tr>
        </thead>
        <tbody>
            {% for product in products %}
            <tr style="border-bottom: 1px solid #dee2e6;">
                <td style="padding: 12px;">{{ product.code }}</td>
                <td style="padding: 12px;">{{ product.name }}</td>
                <td style="padding: 12px;">{{ product.get_category_display }}</td>
                <td style="padding: 12px; text-align: right;">R$ {{ product.price }}</td>
                <td style="padding: 12px; text-align: right;">{{ product.stock }}</td>
                <td style="padding: 12px; text-align: center;">
                    <a href="{% url 'product_detail' product.pk %}" style="color: #007bff; text-decoration: none;">Ver detalhes</a>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="6" style="padding: 20px; text-align: center; color: #6c757d;">Nenhum produto encontrado.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% if page_obj.has_other_pages %}
<div style="margin-top: 20px; text-align: center;">
    {% if page_obj.has_previous %}
    <a href="?page={{ page_obj.previous_page_number }}" style="padding: 8px 16px; background: #007bff; color: white; text-decoration: none; border-radius: 4px; margin: 0 5px;">← Anterior</a>
    {% endif %}
    
    <span style="padding: 8px 16px;">Página {{ page_obj.number }} de {{ page_obj.paginator.num_pages }}</span>
    
    {% if page_obj.has_next %}
    <a href="?page={{ page_obj.next_page_number }}" style="padding: 8px 16px; background: #007bff; color: white; text-decoration: none; border-radius: 4px; margin: 0 5px;">Próxima →</a>
    {% endif %}
</div>
{% endif %}
{% endblock %}

